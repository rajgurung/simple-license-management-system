<div class="max-w-6xl mx-auto">
  <div class="flex justify-between items-center mb-8">
    <h1 class="text-3xl font-bold text-gray-900">Accounts</h1>
    <%= link_to "Create Account", new_account_path, class: "bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition font-medium" %>
  </div>

  <% if @accounts.any? %>
    <div class="bg-white shadow overflow-hidden sm:rounded-md">
      <ul class="divide-y divide-gray-200">
        <% @accounts.each do |account| %>
          <li>
            <%= link_to account_path(account), class: "block hover:bg-gray-50 transition" do %>
              <div class="px-6 py-4">
                <div class="flex items-center justify-between">
                  <p class="text-lg font-medium text-blue-600 truncate">
                    <%= account.name %>
                  </p>
                  <div class="ml-2 flex-shrink-0 flex space-x-2">
                    <p class="px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">
                      ðŸ‘¤ <%= account.users_count %> users
                    </p>
                    <p class="px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800">
                      ðŸ“‹ <%= account.active_subscriptions_count %> subscriptions
                    </p>
                    <%
                      total_licenses = account.total_licenses
                      used_licenses = account.license_assignments_count
                      available = total_licenses - used_licenses
                      percentage_available = total_licenses > 0 ? (available.to_f / total_licenses * 100) : 0

                      badge_color = if percentage_available > 50
                        "bg-green-100 text-green-800"
                      elsif percentage_available > 20
                        "bg-yellow-100 text-yellow-800"
                      else
                        "bg-red-100 text-red-800"
                      end
                    %>
                    <p class="px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full <%= badge_color %>">
                      ðŸŽ« <%= used_licenses %>/<%= total_licenses %> licenses
                    </p>
                  </div>
                </div>
              </div>
            <% end %>
          </li>
        <% end %>
      </ul>
    </div>
  <% else %>
    <div class="bg-white shadow rounded-lg p-12 text-center">
      <svg class="mx-auto h-12 w-12 text-gray-400 mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" />
      </svg>
      <h3 class="text-lg font-medium text-gray-900 mb-2">No accounts yet</h3>
      <p class="text-gray-600 mb-6">Get started by creating your first account.</p>
      <%= link_to "Create Account", new_account_path, class: "inline-block bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition font-medium" %>
    </div>
  <% end %>
</div>
